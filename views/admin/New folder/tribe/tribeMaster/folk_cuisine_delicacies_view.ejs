<!DOCTYPE html>
<html lang="en">
    
    <%- include('../../admin-layouts/top-header') %>
    <body class="hold-transition fixed sidebar-mini">
        <!-- Preloader -->
        <div class="preloader"></div>
		
        <!-- Site wrapper -->
        <div class="wrapper">
            <%- include('../../admin-layouts/header') %>
            
            <div class="content-wrapper">
				 
				<!-- page content -->
            	<div class="right_col" role="main">
					<div class="row">
            <% if(error.length>0){ %>
              <script>new Toasteur("top-right", 3000).error(" <%= error %>", 'Error!');</script>
           <% } %>
        
           <% if(success.length>0){ %>
              <script>new Toasteur("top-right", 3000).success(" <%= success %>", 'Success!');</script>
           <% } %>
                        <div class="col-sm-12">
							<div class="clearfix"></div>
                            <div class="panel panel-bd lobidrag">
                                
                                <div class="panel-body">
                                    <div class="col-sm-12">
                                        <fieldset class="the-fieldset">
                                            <legend class="the-legend">Tribe- ADA</legend>
                                            <dl>
                                              <dt>Tribe Name</dt>
                                              <dd><%= tribe[0].tribe_name %></dd>
                                              <dt>Tribe About</dt>
                                              <dd><%= tribe[0].about_tribe %></dd>
                                          </dl>
                                        </fieldset>
                                    </div>
                                    
                                    <div class="col-sm-2 mt">
                                      <%- include('../../admin-layouts/tribe-left-panel') %> 
                                    </div>

                                     <div class="col-sm-10 mt">
                                        <fieldset class="the-fieldset">
                                          <%
                                            tribe_name  = tribe[0].tribe_name? tribe[0].tribe_name : '';
                                            name       = tribe[0].dish_delicacy_name ? tribe[0].dish_delicacy_name : '';
                                            ingredients   = tribe[0].ingredients ? tribe[0].ingredients : '';
                                            preparation    = tribe[0].preparation_time ? tribe[0].preparation_time : ''; 
                                            recipe       = tribe[0].recipe ? tribe[0].recipe : '';
                                            traditional    = tribe[0].traditional_serving_methods ? tribe[0].traditional_serving_methods : '';
                                            occasions  = tribe[0].occasions_events_associated ? tribe[0].occasions_events_associated : '';
                                            region      = tribe[0].region_cultural_origin ? tribe[0].region_cultural_origin : '';
                                            historical  = tribe[0].historical_religious_significance ? tribe[0].historical_religious_significance : '';
                                          %>
                                            <legend class="the-legend">Tribe - > Script</legend>
                                            <form data-toggle="validator"method="post" name="add_CuisineDelicacies"  id="addCuisineDelicacies" enctype="multipart/form-data"  action="/admin/tribe/master/traditions/delicacies/<%=tribeId%>/<%=delicaciesId%>">
                                                <div class="col-sm-4">
                                                   
                                                    <label class="form-label required">Tribe(s) :</label>
                                                  <select class="form-control form-select"  name="tribe_name" id="tribeName">
                                                    <option value="<%= tribe[0].tribe_id %>"><%= tribe[0].tribe_name %></option>
                                                  </select>
                                                  </div>
                                                  <div class="col-sm-4">
                                                    <label class="form-label required">Dish Name:</label>
                                                    <input class="form-control" type="text" name="dish_delicacy_name" id="dish_delicacy_name" value="<%=name%>" placeholder="Enter Dish Name">
                                                  </div>
                                                  <div class="col-sm-4">
                                                    <label class="form-label required">ingredients:</label>
                                                    <input class="form-control" name="ingredients" id="ingredients" value="<%=ingredients%>" placeholder="Enter ingredients">
                                                  </div>
                                                  <div class="col-sm-4">
                                                    <label class="form-label required">Preparation Time:</label>
                                                    <input class="form-control" type="text" name="preparation_time" id="preparation_time" value="<%=preparation%>" placeholder="Enter preparation_time">
                                                  </div>
                                                  <div class="col-sm-4">
                                                    <label class="form-label required">Recipe: </label>
                                                    <input class="form-control" type="text" name="recipe" id="recipe" value="<%=recipe%>" placeholder="Enter Recipe">
                                                  </div>
                                                  <div class="col-sm-4">
                                                    <label class="form-label required">Serving Methods: </label>
                                                    <input class="form-control" type="text" name="traditional_serving_methods" id="traditional_serving_methods" value="<%=traditional%>" placeholder="Enter Serving Methods">
                                                  </div>
                                                  <div class="col-sm-4">
                                                    <label class="form-label required">Occasions: </label>
                                                    <input class="form-control" type="text" name="occasions_events_associated" id="occasions_events_associated" value="<%=occasions%>" placeholder="Enter Occasions">
                                                  </div>
                                                  <div class="col-sm-4">
                                                    <label class="form-label required">Region:</label>
                                                    <input class="form-control" type="text" name="region_cultural_origin" id="region_cultural_origin" value="<%=region%>" placeholder="Enter Region Or Cultual Origin">
                                                  </div>
                                                  <div class="col-sm-4">
                                                    <label class="form-label required">Historical:</label>
                                                    <input class="form-control" type="text" name="historical_religious_significance" id="historical_religious_significance" value="<%=historical%>" placeholder="Enter Historical/religious Context and Significance">
                                                  </div>
                                               
                                                  <div class="col-sm-4">
                                                    <label for="status" class="control-label">Is Folk</label>
                                                    <div class="radio_inline">
                                                        <div class="radio">
                                                            <input type="radio" name="is_folk" value="1" id="toast" required="" checked>
                                                            <label for="toast">Yes</label>
                                                        </div>
                                                        <div class="radio">
                                                            <input type="radio" name="is_folk" value="0" id="boost" required="">
                                                            <label for="boost">No</label>
                                                        </div>
                                                    </div>
                                                  </div>
                                                <div class="form-group pull-right mt">
                                                    <button type="submit" class="btn btn-cap m-r-5" onclick="return Validate();">Submit</button>
                                                    <button type="submit" class="btn btn-warning">Cancel</button>
                                                </div>
                                            </form>
                                        </fieldset>
                                        <div class="mt"> 
                                            <fieldset class="the-fieldset">
                                              <legend class="the-legend">Tribe - > Languages List</legend>
                                            <div class="table-responsive">
                                              <table id="myTable" class="table card-table table-vcenter text-nowrap datatable">
                                                <thead>
                                                  <tr>
                                                    <th>S No.</th>
                                                    <th>Tribe Name</th>
                                                    <th>Dish Name</th>
                                                    <th>Ingredients</th>
                                                    <th>Preparation Time</th>
                                                    <th>Recipe</th>
                                                    <th>Serving Methods</th>
                                                    <th>Occasions</th>
                                                    <th>Region</th>
                                                    <th>Historical</th>
                                                    <th>Image</th>
                                                    <th>Music</th>
                                                    <th>Video</th>
                                                    <th>Action</th>
                                                  </tr>
                                                </thead>
                                                <tbody>
                                                    <%  if(delicacies.length>0)
                                                    { 
                                                      var number= 1;
                                                      var del = '';
                                                      for (let l of delicacies)
                                                        { %>
                                                          <tr>
                                                            <td><%= number %></td>
                                                            <td><%= l.tribe_name %></td>
                                                            <td><%= l.dish_delicacy_name %></td>
                                                            <td><%= l.ingredients %></td>
                                                            <td><%= l.preparation_time %></td>
                                                            <td><%= l.recipe %></td>
                                                            <td><%= l.traditional_serving_methods %></td>
                                                            <td><%= l.occasions_events_associated %></td>
                                                            <td><%= l.region_cultural_origin %></td>
                                                            <td><%= l.historical_religious_significance %></td>
                                                            <td><a href="/admin/tribe/master/folk-media/<%= categoryType %>/<%= l.tribe_id %>/<%= l.delicacies_id %>/image"><span class="label label-pill label-info-outline m-r-15"><%= l.image %></span></a></td>
                                                            <td><a href="/admin/tribe/master/folk-media/<%= categoryType %>/<%= l.tribe_id %>/<%= l.delicacies_id %>/audio"><span class="label label-pill label-warning-outline m-r-15"><%= l.audio %></span></a></td>
                                                            <td><a href="/admin/tribe/master/folk-media/<%= categoryType %>/<%= l.tribe_id %>/<%= l.delicacies_id %>/video"><span class="label label-pill label-danger-outline m-r-15"><%= l.video %></span></a></td>
                                                            <td>
                                                              <a href="/admin/tribe/master/traditions/delicacies/<%= l.tribe_id %>/<%= l.delicacies_id %>" class="btn btn-xs btn-success" aria-label=""  title="Edit Item">
                                                                <i class="fa fa-edit"></i>
                                                              </a>
                                                              <a onclick="return checkConfirm('<%= l.delicacies_id  %>')"  class="btn btn-xs btn-danger" aria-label="" title="Delete Item">
                                                                <i class="fa fa-trash"></i>
                                                            </a>
                                                            </td>
                                                          </tr>
                    
                                                        <% number++; } 
                                                    }  %>
                                                 
                                                </tbody>
                                              </table>
                                            </div>
                                          </fieldset>
                                         </div>
                                     </div>
                                     
                                </div>
							    		
                            </div>
                        </div>
                    </div>
				</div>
				<!-- /page content -->
               
            </div>
            <!-- footer content -->
				<%- include('../../admin-layouts/footer') %>
			<!-- /footer content -->
        </div> <!-- ./wrapper -->
    </body>
    <script type="text/javascript">
        function Validate() {
          var error = '';
          var tribeName = $('#tribeName').val();
          var dish_delicacy_name = $('#dish_delicacy_name').val();
          var ingredients = $('#ingredients').val();
          var preparation_time = $('#preparation_time').val();
          var recipe = $('#recipe').val();
          var traditional_serving_methods = $('#traditional_serving_methods').val();
          var occasions_events_associated = $('#occasions_events_associated').val();
          var region_cultural_origin = $('#region_cultural_origin').val();
          var historical_religious_significance = $("#historical_religious_significance").val();
          
          if (tribeName == '' || tribeName == null) {
            error += 'Tribe Name is required\n';
          }
          if (dish_delicacy_name == '' || dish_delicacy_name == null) {
            error += 'Dish Name is required\n';
          }
          if (ingredients == '' || ingredients == null) {
            error += 'Ingredients is required\n';
          }
          if (preparation_time == '' || preparation_time == null) {
            error += 'Preparation Time is required\n';
          }
          if (recipe == '' || recipe == null) {
            error += 'Recipe is required\n';
          }
          if (traditional_serving_methods == '' || traditional_serving_methods == null) {
            error += 'Serving Methods is required\n';
          }
          if (occasions_events_associated == '' || occasions_events_associated == null) {
            error += 'occasions is required\n';
          }
          if (region_cultural_origin == '' || region_cultural_origin == null) {
            error += 'Region Cultural Origin is required\n';
          }
          if (historical_religious_significance == '' || historical_religious_significance == null) {
            error += 'Historical Religious Significance is required\n';
          }
       

      
          if (error != '') {
            swal({
              title: "Error",
              text: "" + error,
              type: "error",
              showCancelButton: true,
              confirmButtonClass: 'btn-danger',
            });
          } else {
            document.forms["add_CuisineDelicacies"].submit();
          }
        }

function checkConfirm(id) {
    
    var rowId  = id;
    var y = confirm('Are you sure');
    if(y)
    {
        $.ajax({
        type: 'get', // Type of request to be send, called as method
        url: '/admin/tribe/master/traditionsDelete/delicacies/'+rowId, //  Url to which the request is send
        dataType: 'json',
        success: function (responce) { // A function to be called if request succeeds.
          if(responce == 1){
              new Toasteur("top-right", 3000).success("Selected row Deleted Suceesfully", 'Success');
              $("#rowid_"+rowId).hide();
              setTimeout(function(){
                  window.location.reload(1);
              }, 3000);
          }else{
              new Toasteur("top-right", 3000).error("Somthing Went wrong Please try again", 'Error!');
              setTimeout(function(){
                  window.location.reload(1);
              }, 3000);
          }
          }
        });
    }

}           
      </script>

</html>